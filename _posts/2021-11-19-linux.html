---
layout: post
title: Анонимизация трафика Linux
date: '2021-11-19T18:15:00.004+03:00'
author: Rishat
tags:
- Linux
- Tor
- Безопасность
modified_time: '2021-11-19T18:20:08.305+03:00'
thumbnail: https://blogger.googleusercontent.com/img/a/AVvXsEgbtpY_PN6RmkWuD39Ead46FQG-svXH3Q4i5S9acwEASpNih-CRZwWH4fhlcq_D4Ny0gkug9kvn37sr5AzSns50_KJdp2bvzvi8thdEbqholh_a4CIhju2hsVf6R8___ARr8FPsiANkZlSM7KKE39p9fvj3ntynWccGV6BlrcrrypsD5909hbh6Jj75hQ=s72-w640-c-h352
blogger_id: tag:blogger.com,1999:blog-632559424411275764.post-3270793214129384437
blogger_orig_url: https://dxcpp.blogspot.com/2021/11/linux.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://blogger.googleusercontent.com/img/a/AVvXsEgbtpY_PN6RmkWuD39Ead46FQG-svXH3Q4i5S9acwEASpNih-CRZwWH4fhlcq_D4Ny0gkug9kvn37sr5AzSns50_KJdp2bvzvi8thdEbqholh_a4CIhju2hsVf6R8___ARr8FPsiANkZlSM7KKE39p9fvj3ntynWccGV6BlrcrrypsD5909hbh6Jj75hQ=s956" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="526" data-original-width="956" height="352" src="https://blogger.googleusercontent.com/img/a/AVvXsEgbtpY_PN6RmkWuD39Ead46FQG-svXH3Q4i5S9acwEASpNih-CRZwWH4fhlcq_D4Ny0gkug9kvn37sr5AzSns50_KJdp2bvzvi8thdEbqholh_a4CIhju2hsVf6R8___ARr8FPsiANkZlSM7KKE39p9fvj3ntynWccGV6BlrcrrypsD5909hbh6Jj75hQ=w640-h352" width="640" /></a></div><p>Использовать операционную систему на базе Linux для сокрытия своей личности в Интернете довольно просто, и вы можете сделать это без оплаты услуг VPN, подобных тем, которые доступны сегодня.&nbsp;</p><p>Дистрибутивы Kali Linux используются для тестирования безопасности сетей WiFi, веб-сайтов и серверов, среди прочего.&nbsp;</p><p>Такие операционные системы, как Debian и Ubuntu, также часто используются для этих целей.&nbsp;</p><p><a href="https://github.com/haad/proxychains" target="_blank">ProxyChains</a> и <a href="https://www.torproject.org/" target="_blank">Tor</a> могут быть использованы для создания цепочки из множества прокси-серверов и обеспечения анонимности, что делает более сложным отслеживание вашего реального IP-адреса.&nbsp;</p><p>В результате ProxyChains скрывает ваш настоящий IP-адрес, используя множество прокси-серверов.&nbsp;</p><p>Запомните, что чем больше прокси-серверов вы используете, тем медленнее будет работать ваше интернет-соединение.<span></span></p><a name='more'></a><p></p><h3 style="text-align: left;">Что такое Proxychains?&nbsp;</h3><p>Proxychains – это программа UNIX, которая позволяет нам маскировать наш IP-адрес путем перенаправления сетевого трафика.</p><p>Она направляет наш TCP-трафик через различные прокси-серверы, включая TOR, SOCKS и HTTP.&nbsp;</p><p></p><ul style="text-align: left;"><li>Совместимы Инструменты разведки TCP, такие как Nmap</li><li>Позволяет перенаправлять любое TCP-соединение в Интернет через ряд настраиваемых прокси-серверов.</li><li>По умолчанию используется сеть Tor.</li><li>Можно смешивать и сочетать различные виды прокси.</li><li>Proxychains могут также использоваться для обхода брандмауэров, IDS и IPS.&nbsp;</li></ul><p></p><p>Создание цепочек прокси очень простое и может быть выполнено любым человеком, как показано в этой статье.&nbsp;</p><p>Это руководство покажет вам, как настроить Tor и Proxychains в Linux для анонимности.&nbsp;</p><h3 style="text-align: left;">Установка Tor и Proxychains в системах Linux&nbsp;</h3><p>Сначала обновите систему Linux с помощью патчей и последних приложений.&nbsp;</p><p>Для этого откройте терминал и введите:&nbsp;</p><p><br /></p><pre class="prettyprint linenums lang-cpp">$ sudo apt update &amp;&amp; sudo apt upgrade<br /></pre><p>Затем проверьте, предустановлены ли Tor и Proxychains или нет, просто набрав эти команды по отдельности : </p><pre class="prettyprint linenums lang-cpp">$ proxychains <br />$ tor<br /></pre><p>Если они не были установлены, введите в терминале следующую команду: </p><pre class="prettyprint linenums lang-cpp">$ sudo apt install proxychains tor -y<br /></pre><p>Обратите внимание, что мы не устанавливаем браузер Tor.</p><p>Мы устанавливаем службу tor, которая представляет собой службу, запускаемую локально на вашей виртуальной машине или в вашей операционной системе и фактически привязанную к определенному порту на локальном хосте.</p><p>В нашем случае это будет 9050, и это порт по умолчанию для службы tor.</p><p>Чтобы проверить состояние Tor :</p><pre class="prettyprint linenums lang-cpp">└─# service tor status                                                                 <br />● tor.service - Anonymizing overlay network for TCP (multi-instance-master)<br />     Loaded: loaded (/lib/systemd/system/tor.service; disabled; vendor preset: disabled)<br />     Active: inactive (dead)<br /></pre><p>Чтобы запустить службу tor :</p><pre class="prettyprint linenums lang-cpp">$ service tor start<br /></pre> <p>Чтобы остановить службу tor : </p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">$ service tor stop <br /></pre><h3 style="text-align: left;">Настройка ProxyChains</h3> <p>Сначала найдите каталог ProxyChains с помощью этой команды:</p><pre class="prettyprint linenums lang-cpp" style="text-align: left;"># locate proxychains                       <br />/etc/proxychains4.conf<br />/etc/alternatives/proxychains<br />/etc/alternatives/proxychains.1.gz<br />/usr/bin/proxychains<br />/usr/bin/proxychains4<br />/usr/lib/x86_64-linux-gnu/libproxychains.so.4<br />/usr/share/applications/kali-proxychains.desktop<br />/usr/share/doc/libproxychains4<br />/usr/share/doc/proxychains4<br /></pre><p>Это наш конфигурационный файл. </p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">/etc/proxychains4.conf<br /></pre> <p>Исходя из вышеприведенного результата, мы можем заметить, что конфигурационный файл ProxyChain находится в /etc/.</p><p>Нам нужно внести некоторые изменения в конфигурационные файлы ProxyChains. Откройте файл конфигурации в вашем любимом текстовом редакторе, например leafpad, vim или nano.</p><p>Здесь я использую редактор nano.</p> <pre class="prettyprint linenums lang-cpp" style="text-align: left;">nano /etc/proxychains.conf<br /></pre><p>Конфигурационный файл открыт.</p><p>Теперь вам нужно закомментировать и раскомментировать некоторые строки, чтобы настроить цепочки прокси.</p><p>Вы заметите “#” в конфигурации, что означает комментарии языка bash.</p><p>Вы можете прокрутить вниз и внести коррективы, используя клавиши со стрелками.</p><p>#1. Динамическая цепочка должна быть раскомменчена</p><p>Все, что вам нужно сделать, это убрать символ # перед dynamic_chain.</p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">dynamic_chain<br />#<br /># Dynamic - Each connection will be done via chained proxies<br /># all proxies chained in the order as they appear in the list<br /># at least one proxy must be online to play in chain<br /># (dead proxies are skipped)<br /># otherwise EINTR is returned to the app<br /></pre><p>#2. Поместите комментарий перед random_chain и strict_chain. Просто добавьте # перед ними.</p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">#random_chain<br />#<br /># Random - Each connection will be done via random proxy<br /># (or proxy chain, see  chain_len) from the list.<br /># this option is good to test your IDS :)<br /></pre><p>#3. Таким образом вы избежите утечки DNS, которая может раскрыть ваш истинный IP-адрес. </p><pre class="prettyprint linenums lang-cpp" style="text-align: left;"># Proxy DNS requests - no leak for DNS data<br />proxy_dns<br /></pre><p>#4. Добавьте socks5 127.0.0.1 9050 в список прокси последней строкой. </p> <pre class="prettyprint linenums lang-cpp" style="text-align: left;">ProxyList]<br /># add proxy here ...<br /># meanwile<br /># defaults set to "tor"<br />socks4  127.0.0.1 9050 <br />socks5  127.0.0.1 9050  <br /></pre><p>Здесь уже будет указан socks4 proxy. Вам нужно добавить socks5 proxy, как показано выше. И, наконец, сохраните файл конфигурации и выйдите из терминала.</p><h3 style="text-align: left;">Использование ProxyChains  </h3><p>Сначала необходимо запустить службу Tor, чтобы использовать ProxyChains. </p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">─# service tor start <br /></pre><p>После запуска службы tor вы можете использовать ProxyChains для просмотра веб-страниц, а также для анонимного сканирования и перечисления.  Вы также можете использовать инструмент Nmap или sqlmap с ProxyChain для анонимного сканирования и поиска эксплойтов.  Здорово, правда? </p><p>Чтобы использовать ProxyChains, просто введите команду ProxyChains в терминале, а затем имя приложения, которое вы хотите использовать.</p>  <p>Формат следующий:</p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">$ proxychains firefox www.flippa.com<br /></pre> <p>Чтобы использовать Nmap:</p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">$ proxychains nmap -targetaddress<br /></pre><p>Чтобы использовать sqlmap: </p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">$  proxychains python sqlmap -u target<br /></pre><p>Вы также можете анонимно проверить наличие эксплойтов, например:</p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">proxychains python sqlmap -u http://www.targetaddress/products.php?product=3<br /></pre><p>Буквально, каждый инструмент разведки TCP может быть использован с ProxyChains.</p><p>Для окончательного подтверждения того, что ProxyChains работает правильно или нет, просто зайдите на dnsleaktest.com и проверьте свой IP-адрес и утечки DNS.</p><p>После запуска ProxyChains вы заметите, что Firefox загрузился с другим языком.</p><p>Теперь давайте проведем тест на утечку DNS с помощью команды:</p><pre class="prettyprint linenums lang-cpp" style="text-align: left;">$ proxychains firefox dnsleaktest.com<br /></pre> <p>Если вы хотите увидеть новый результат, просто закройте Firefox, очистите терминал, перезапустите службу Tor и снова запустите ProxyChains. В тесте на утечку DNS вы увидите различные результаты. Вы увидите, что местоположение изменилось. Так работают прокси с динамической цепочкой. Это увеличивает шансы на анонимность при взломе.</p><h3 style="text-align: left;">Заключение </h3><p>Мы узнали, как сохранить анонимность в Интернете и защитить свою конфиденциальность во время пентеста. </p><p>ProxyChains также можно использовать в сочетании с такими инструментами безопасности, как Nmap и Burpsuite, и они часто используются для обхода IDS, IPS и обнаружения брандмауэров.</p>